import{a as C,o as a,c as r,b as e,g as j,w as h,h as i,v as d,t as y,d as g,i as v,j as o,k as M,f as S}from"./index-R9P4HaMK.js";const U={class:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4"},q={class:"max-w-md w-full"},B={class:"card"},L={class:"mb-4"},N={class:"mb-6"},z={key:0,class:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-600 text-sm"},R=["disabled"],$={key:0,class:"flex items-center justify-center"},D={key:1},E={class:"mt-6 text-center"},T={class:"text-sm text-gray-600"},A={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},F={class:"bg-white rounded-2xl max-w-md w-full p-6 slide-up"},H={class:"flex justify-between items-center mb-6"},I={class:"mb-4"},G={class:"mb-4"},J={class:"mb-6"},K={key:0,class:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-600 text-sm"},O={class:"flex space-x-3"},P=["disabled"],X={__name:"LoginView",setup(Q){const w=S(),k=C(),x=o(""),f=o(""),u=o(!1),m=o(""),n=o(!1),l=M({name:"",email:"",password:""}),p=o(!1),b=o("");async function V(){u.value=!0,m.value="";try{await k.signIn(x.value,f.value),w.push("/")}catch(c){m.value=c.message}finally{u.value=!1}}async function _(){p.value=!0,b.value="";try{await k.signUp(l.email,l.password,l.name),n.value=!1,w.push("/")}catch(c){b.value=c.message}finally{p.value=!1}}return(c,t)=>(a(),r("div",U,[e("div",q,[t[12]||(t[12]=j('<div class="text-center mb-8"><div class="mx-auto h-16 w-16 bg-primary-600 rounded-2xl flex items-center justify-center mb-4"><svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path></svg></div><h1 class="text-2xl font-bold text-gray-800">标准物质管理系统</h1><p class="mt-2 text-gray-600">登录您的账户</p></div>',1)),e("div",B,[e("form",{onSubmit:h(V,["prevent"])},[e("div",L,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"邮箱",-1)),i(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>x.value=s),type:"email",class:"input",placeholder:"请输入邮箱",required:""},null,512),[[d,x.value]])]),e("div",N,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"密码",-1)),i(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>f.value=s),type:"password",class:"input",placeholder:"请输入密码",required:""},null,512),[[d,f.value]])]),m.value?(a(),r("div",z,y(m.value),1)):g("",!0),e("button",{type:"submit",class:"btn btn-primary w-full py-3",disabled:u.value},[u.value?(a(),r("span",$,[...t[10]||(t[10]=[e("svg",{class:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),v(" 登录中... ",-1)])])):(a(),r("span",D,"登录"))],8,R)],32),e("div",E,[e("p",T,[t[11]||(t[11]=v(" 还没有账户？ ",-1)),e("button",{onClick:t[2]||(t[2]=s=>n.value=!0),class:"text-primary-600 font-medium hover:underline"}," 立即注册 ")])])]),t[13]||(t[13]=e("div",{class:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg"},[e("p",{class:"text-sm text-blue-700"},[e("strong",null,"提示："),v("首次使用请先在Supabase控制台执行 "),e("code",{class:"bg-blue-100 px-1 rounded"},"supabase-schema.sql"),v(" 初始化数据库。 ")])],-1))]),n.value?(a(),r("div",A,[e("div",F,[e("div",H,[t[15]||(t[15]=e("h2",{class:"text-xl font-semibold text-gray-800"},"注册新账户",-1)),e("button",{onClick:t[3]||(t[3]=s=>n.value=!1),class:"text-gray-400 hover:text-gray-600"},[...t[14]||(t[14]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("form",{onSubmit:h(_,["prevent"])},[e("div",I,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"用户名",-1)),i(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>l.name=s),type:"text",class:"input",placeholder:"请输入用户名",required:""},null,512),[[d,l.name]])]),e("div",G,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"邮箱",-1)),i(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>l.email=s),type:"email",class:"input",placeholder:"请输入邮箱",required:""},null,512),[[d,l.email]])]),e("div",J,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"密码",-1)),i(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>l.password=s),type:"password",class:"input",placeholder:"请输入密码（至少6位）",required:"",minlength:"6"},null,512),[[d,l.password]])]),b.value?(a(),r("div",K,y(b.value),1)):g("",!0),e("div",O,[e("button",{type:"button",onClick:t[7]||(t[7]=s=>n.value=!1),class:"btn btn-secondary flex-1"}," 取消 "),e("button",{type:"submit",class:"btn btn-primary flex-1",disabled:p.value},y(p.value?"注册中...":"注册"),9,P)])],32)])])):g("",!0)]))}};export{X as default};
